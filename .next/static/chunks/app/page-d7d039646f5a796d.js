(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{48796:(e,s,t)=>{Promise.resolve().then(t.bind(t,68645))},68645:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eM});var a=t(95155),r=t(12115),l=t(57434),n=t(93500),i=t(72713),c=t(16785),o=t(46561),d=t(4229);function x(e){let{onComplete:s}=e,t=(0,r.useRef)(null),[x,m]=(0,r.useState)(0),[g,u]=(0,r.useState)(0),[h,b]=(0,r.useState)({pages:0,words:0,charCount:0,charCountNoSpace:0,accuracy:100}),y=(0,r.useRef)(null),p=(0,r.useRef)(null),j=(0,r.useRef)(!1),f=(0,r.useRef)(0),v=(0,r.useCallback)(()=>{var e;if(!t.current)return;let s=null!=(e=t.current.textContent)?e:"",a=s.trim().length>0?s.trim().split(/\s+/).length:0,r=s.length,l=s.replace(/\s/g,"").length;b({pages:Math.max(1,Math.ceil(r/600)),words:a,charCount:r,charCountNoSpace:l,accuracy:f.current>0?Math.round(g/f.current*100):100})},[g]),N=(0,r.useCallback)(()=>{p.current&&(clearInterval(p.current),p.current=null)},[]),w=(0,r.useCallback)(()=>{p.current&&clearInterval(p.current),p.current=setInterval(()=>{m(e=>e+1)},1e3),y.current&&clearTimeout(y.current),y.current=setTimeout(N,3e3)},[N]),k=(0,r.useCallback)(e=>{if(1===e.key.length||" "===e.key||"Enter"===e.key){let s=/[가-힣]/.test(e.key)?2:1;u(e=>e+s),f.current+=s,w(),v()}},[w,v]),A=(0,r.useCallback)(e=>{j.current=!0;let s=0;for(let t of e.data)/[가-힣]/.test(t)?s+=2:(/[ㄱ-ㅎ|ㅏ-ㅣ]/.test(t),s+=1);u(e=>e+s),f.current+=s,w(),v()},[w,v]),C=(0,r.useCallback)(e=>{if(j.current){j.current=!1;return}if(e.data){let s=0;for(let t of e.data)/[가-힣]/.test(t)?s+=2:s+=1;u(e=>e+s),f.current+=s,w(),v()}},[w,v]),S=async()=>{var e;t.current&&(s({content:null!=(e=t.current.textContent)?e:"",keyCount:g,typingTime:x,timestamp:new Date().toISOString()}),t.current&&(t.current.textContent=""),u(0),m(0),f.current=0,v())};return(0,r.useEffect)(()=>()=>{p.current&&clearInterval(p.current),y.current&&clearTimeout(y.current)},[]),(0,a.jsxs)("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 rounded-t-lg",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 text-blue-500"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["글자: ",h.charCount,"(",h.charCountNoSpace,")"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 text-green-500"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["단어: ",h.words]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 text-purple-500"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["페이지: ",h.pages]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 text-orange-500"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["타자: ",g]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-red-500"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["시간: ",x,"초"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 text-indigo-500"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["타수: ",x>0?Math.round(g/x*60):0,"타/분"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 text-teal-500"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["정확도: ",h.accuracy,"%"]})]})]}),(0,a.jsxs)("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors duration-200 shadow-sm",children:[(0,a.jsx)(d.A,{className:"w-4 h-4"}),"저장"]})]}),"        ",(0,a.jsx)("div",{ref:t,className:"flex-1 p-6 outline-none resize-none bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 leading-relaxed text-base overflow-auto",contentEditable:!0,onKeyDown:k,onCompositionEnd:A,onInput:C,"data-placeholder":"여기에 타이핑을 시작하세요...",style:{minHeight:"300px",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',lineHeight:"1.6"}})]})}var m=t(83540),g=t(3401),u=t(94754),h=t(96025),b=t(16238),y=t(94517),p=t(24026),j=t(58227),f=t(93504),v=t(21374),N=t(69074),w=t(79397),k=t(14186);function A(e){let{logs:s}=e,[t,n]=(0,r.useState)("daily"),[c,o]=(0,r.useState)("keyCount"),[d,x]=(0,r.useState)("bar"),A=(0,r.useMemo)(()=>{if(!s||0===s.length)return[];if("daily"===t){let e={};return s.forEach(s=>{let t=new Date(s.timestamp).toLocaleDateString();e[t]||(e[t]={date:t,keyCount:0,typingTime:0,totalChars:0,sessions:0,averageWPM:0}),e[t].keyCount+=s.keyCount||0,e[t].typingTime+=s.typingTime||0,e[t].totalChars+=s.totalChars||0,e[t].sessions+=1}),Object.values(e).forEach(e=>{e.averageWPM=e.typingTime>0?Math.round(e.keyCount/e.typingTime*60):0}),Object.values(e).sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime())}{let e={};return s.forEach(s=>{let t=new Date(s.timestamp).getHours(),a="".concat(t,"시");e[a]||(e[a]={hour:a,keyCount:0,typingTime:0,totalChars:0,sessions:0,averageWPM:0}),e[a].keyCount+=s.keyCount||0,e[a].typingTime+=s.typingTime||0,e[a].totalChars+=s.totalChars||0,e[a].sessions+=1}),Object.values(e).forEach(e=>{e.averageWPM=e.typingTime>0?Math.round(e.keyCount/e.typingTime*60):0}),Object.values(e).sort((e,s)=>parseInt(e.hour)-parseInt(s.hour))}},[s,t]),C=e=>{switch(e){case"keyCount":default:return"타자수";case"typingTime":return"타이핑 시간(초)";case"totalChars":return"총 문자수"}},S=e=>{switch(e){case"keyCount":default:return"#3b82f6";case"typingTime":return"#10b981";case"totalChars":return"#f59e0b"}};return(0,a.jsxs)("div",{className:"w-full bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(i.A,{className:"w-6 h-6 text-blue-500"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"타이핑 통계 차트"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"기간:"}),(0,a.jsxs)("div",{className:"flex rounded-md overflow-hidden border border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("button",{className:"px-3 py-1 text-sm transition-colors ".concat("daily"===t?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>n("daily"),children:"일별"}),(0,a.jsx)("button",{className:"px-3 py-1 text-sm transition-colors border-l border-gray-300 dark:border-gray-600 ".concat("hourly"===t?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>n("hourly"),children:"시간별"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"차트:"}),(0,a.jsxs)("div",{className:"flex rounded-md overflow-hidden border border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("button",{className:"px-3 py-1 text-sm transition-colors ".concat("bar"===d?"bg-green-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>x("bar"),children:"막대"}),(0,a.jsx)("button",{className:"px-3 py-1 text-sm transition-colors border-l border-gray-300 dark:border-gray-600 ".concat("line"===d?"bg-green-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>x("line"),children:"선형"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"데이터:"}),(0,a.jsxs)("div",{className:"flex rounded-md overflow-hidden border border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("button",{className:"px-3 py-1 text-sm transition-colors ".concat("keyCount"===c?"bg-purple-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>o("keyCount"),children:"타자수"}),(0,a.jsx)("button",{className:"px-3 py-1 text-sm transition-colors border-l border-gray-300 dark:border-gray-600 ".concat("typingTime"===c?"bg-purple-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>o("typingTime"),children:"시간"}),(0,a.jsx)("button",{className:"px-3 py-1 text-sm transition-colors border-l border-gray-300 dark:border-gray-600 ".concat("totalChars"===c?"bg-purple-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>o("totalChars"),children:"문자수"})]})]})]})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"h-96",children:(0,a.jsx)(m.u,{width:"100%",height:"100%",children:"bar"===d?(0,a.jsxs)(g.E,{data:A,margin:{top:20,right:30,left:20,bottom:30},children:[(0,a.jsx)(u.d,{strokeDasharray:"3 3",className:"opacity-30"}),(0,a.jsx)(h.W,{dataKey:"daily"===t?"date":"hour",angle:-45,textAnchor:"end",height:70,className:"text-xs fill-gray-600 dark:fill-gray-400"}),(0,a.jsx)(b.h,{className:"text-xs fill-gray-600 dark:fill-gray-400"}),(0,a.jsx)(y.m,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,a.jsx)(p.s,{}),(0,a.jsx)(j.y,{dataKey:c,name:C(c),fill:S(c),radius:[4,4,0,0]})]}):(0,a.jsxs)(f.b,{data:A,margin:{top:20,right:30,left:20,bottom:30},children:[(0,a.jsx)(u.d,{strokeDasharray:"3 3",className:"opacity-30"}),(0,a.jsx)(h.W,{dataKey:"daily"===t?"date":"hour",angle:-45,textAnchor:"end",height:70,className:"text-xs fill-gray-600 dark:fill-gray-400"}),(0,a.jsx)(b.h,{className:"text-xs fill-gray-600 dark:fill-gray-400"}),(0,a.jsx)(y.m,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,a.jsx)(p.s,{}),(0,a.jsx)(v.N,{type:"monotone",dataKey:c,name:C(c),stroke:S(c),strokeWidth:2,dot:{fill:S(c),strokeWidth:2,r:4}})]})})})}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"요약 통계"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(i.A,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"총 타자수"})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.reduce((e,s)=>e+(s.keyCount||0),0).toLocaleString()})]}),(0,a.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(k.A,{className:"w-5 h-5 text-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"총 시간"})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:function(e){if(e<60)return"".concat(e,"초");let s=Math.floor(e/60),t=e%60;if(s<60)return"".concat(s,"분 ").concat(t,"초");let a=Math.floor(s/60);return"".concat(a,"시간 ").concat(s%60,"분 ").concat(t,"초")}(s.reduce((e,s)=>e+(s.typingTime||0),0))})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 text-yellow-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300",children:"총 문자수"})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s.reduce((e,s)=>e+(s.totalChars||0),0).toLocaleString()})]}),(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-purple-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"기록 수"})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:s.length.toLocaleString()})]})]})]})]})}function C(e){let{keyCount:s,typingTime:t,accuracy:a=100}=e,r=t/6e4,l=r>0?s/5/r:0;return{wpm:Math.max(0,l),accuracy:Math.min(100,Math.max(0,a)),performanceIndex:Math.max(0,l*a/100),consistencyScore:Math.min(100,65+Math.min(s,500)/20),fatigueAnalysis:{score:Math.min(100,10*r+l/10),timeFactor:r,intensityFactor:l/100,recommendation:r>30?"휴식이 필요합니다":r>15?"짧은 휴식을 고려하세요":"좋은 상태입니다"}}}function S(e){let{stats:s,isTracking:t,className:l}=e;console.debug("[타이핑 분석기] 컴포넌트 초기화:",{통계데이터유무:!!s,추적상태:t,키개수:(null==s?void 0:s.keyCount)||0});let n=s||{keyCount:0,typingTime:0,accuracy:100},[i,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1),[g,u]=(0,r.useState)(null),[h,b]=(0,r.useState)(!1),y=(0,r.useCallback)(async()=>{try{b(!1)}catch(e){console.warn("GPU 상태 확인 실패:",e),b(!1)}},[]),p=(0,r.useCallback)(async e=>{try{console.debug("[GPU 연산] 타이핑 데이터 처리 시도:",{키개수:e.keyCount,타이핑시간:e.typingTime,정확도:e.accuracy})}catch(e){console.error("GPU 계산 실패:",e)}return null},[]),j=(0,r.useCallback)(async()=>{if(n.keyCount&&n.typingTime){m(!0),u(null);try{if(o&&h){let e=await p(n);if(e)c(e);else{let e=C(n);c(e)}}else{let e=C(n);c(e)}}catch(e){console.error("타이핑 분석 오류:",e),u("분석 중 오류가 발생했습니다."),c(C(n))}finally{m(!1)}}},[n,o,h,p]),f=(0,r.useCallback)(async()=>{let e=!o;if(d(e),e&&h)try{d(!1)}catch(e){console.error("GPU 활성화 실패:",e),d(!1)}},[o,h]);return(0,r.useEffect)(()=>{y()},[y]),(0,r.useEffect)(()=>{n.keyCount>0&&n.typingTime>0&&j()},[n,j]),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 ".concat(l||""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"타이핑 분석"}),h&&(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:o,onChange:f,disabled:x,className:"rounded border-gray-300"}),(0,a.jsx)("span",{children:"GPU 가속"})]})})]}),x&&(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"분석 중..."})]}),g&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:(0,a.jsx)("p",{className:"text-red-700 text-sm",children:g})}),i&&!x&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"속도"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(i.wpm)," WPM"]})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"정확도"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[i.accuracy.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"성능 지수"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:i.performanceIndex.toFixed(1)})]}),(0,a.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"일관성"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:i.consistencyScore.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"피로도 분석"}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(i.fatigueAnalysis.score<30?"bg-green-500":i.fatigueAnalysis.score<70?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(Math.min(100,i.fatigueAnalysis.score),"%")}})}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:i.fatigueAnalysis.recommendation})]})]}),!i&&!x&&!g&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,a.jsx)("p",{children:"타이핑을 시작하면 분석 결과가 표시됩니다."})})]})}var P=t(71007),M=t(75525),I=t(93509),E=t(62098),T=t(74311),U=t(91981),D=t(92657),L=t(23861),G=t(95880),R=t(98611),B=t(54213),O=t(381),z=t(40133),F=t(55345),H=t(45027),K=t(1243),W=t(53904),_=t(27265);let V=function(e){let{onRestart:s,onClose:t,reason:l="설정을 적용하려면",isVisible:n=!1,title:i="애플리케이션 재시작 필요",message:c}=e,[o,d]=(0,r.useState)(!1),x=async()=>{d(!0);try{if(window.electronAPI){let e=await window.electronAPI.invoke("restartApp",l);e.success?(console.log("\uD83D\uDD04 애플리케이션 재시작 중..."),null==s||s()):(console.error("❌ 재시작 실패:",e.message),d(!1))}else window.location.reload()}catch(e){console.error("❌ 재시작 처리 중 오류:",e),d(!1)}};return n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(K.A,{className:"h-8 w-8 text-yellow-500"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:i}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:c||"".concat(l," 애플리케이션을 다시 시작해야 합니다.")}),l&&(0,a.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded-md p-3 mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[(0,a.jsx)("strong",{children:"변경 사항:"})," ",l]})}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:x,disabled:o,className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-white font-medium transition-colors ".concat(o?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"재시작 중..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"지금 재시작"})]})}),(0,a.jsx)("button",{onClick:()=>{null==t||t()},disabled:o,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white border border-gray-300 dark:border-gray-600 rounded-lg transition-colors",children:"나중에"})]})]})]})})}):null};var q=t(73558),J=t(71539),Q=t(73314);let X=e=>{let{className:s="",autoRefresh:t=!0,refreshInterval:l=2e3}=e,[n,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),[d,x]=(0,r.useState)(null),[m,g]=(0,r.useState)([]),[u,h]=(0,r.useState)(!1),b=(0,r.useCallback)(e=>{console.log("메모리 히스토리 업데이트:",{timestamp:new Date().toISOString(),mainUsed:e.main.used,historyLength:m.length})},[m.length]),y=(0,r.useCallback)(async()=>{try{if(o(!0),x(null),window.electronAPI){let e=await window.electronAPI.memory.getInfo();if(e.success&&e.data){let s={...e.data,timestamp:Date.now()};i(s),b(s),g(e=>[...e,s].slice(-60))}else x(e.error||"메모리 정보를 가져올 수 없습니다")}}catch(e){console.error("메모리 정보 가져오기 실패:",e),x(e instanceof Error?e.message:"알 수 없는 오류")}finally{o(!1)}},[]),p=(0,r.useCallback)(async()=>{try{if(h(!0),window.electronAPI){let e=await window.electronAPI.memory.cleanup();e.success?setTimeout(y,1e3):x(e.error||"GC 실행 실패")}}catch(e){console.error("GC 실행 실패:",e),x(e instanceof Error?e.message:"GC 실행 중 오류")}finally{h(!1)}},[y]),j=(0,r.useCallback)(async()=>{try{if(window.electronAPI){let e=await window.electronAPI.memory.optimize();e.success?setTimeout(y,1e3):x(e.error||"메모리 최적화 실패")}}catch(e){console.error("메모리 최적화 실패:",e),x(e instanceof Error?e.message:"메모리 최적화 중 오류")}},[y]);(0,r.useEffect)(()=>{if(y(),t){let e=setInterval(y,l);return()=>clearInterval(e)}},[y,t,l]);let f=e=>e>=85?"text-red-500":e>=70?"text-yellow-500":"text-green-500",v=e=>e>=85?"bg-red-500":e>=70?"bg-yellow-500":"bg-green-500",N=e=>e>=1024?"".concat((e/1024).toFixed(1)," GB"):"".concat(e.toFixed(1)," MB"),w=e=>{let{title:s,icon:t,info:r}=e;return(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-100 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[t,(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:s})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"사용됨"}),(0,a.jsxs)("span",{className:"font-medium ".concat(f(r.percentage)),children:[N(r.used)," (",r.percentage.toFixed(1),"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(v(r.percentage)),style:{width:"".concat(Math.min(r.percentage,100),"%")}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:["여유: ",N(r.free)]}),(0,a.jsxs)("span",{children:["전체: ",N(r.total)]})]})]})]})};return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ".concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"메모리 모니터"}),c&&(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:y,disabled:c,className:"\n              relative inline-flex items-center justify-center\n              w-10 h-6 rounded-full transition-all duration-300 cursor-pointer\n              ".concat(c?"bg-blue-500 opacity-60 cursor-not-allowed":"bg-gray-300 dark:bg-gray-600 hover:bg-blue-400 dark:hover:bg-blue-500","\n              focus:outline-none focus:ring-0\n            "),title:"새로고침",style:{outline:"none",boxShadow:"none"},children:(0,a.jsx)(W.A,{className:"w-3 h-3 text-white transition-transform duration-300 ".concat(c?"animate-spin":"")})}),(0,a.jsx)("button",{onClick:p,disabled:u,className:"\n              relative inline-flex items-center justify-center\n              px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-300 cursor-pointer\n              ".concat(u?"bg-blue-500 text-white opacity-60 cursor-not-allowed":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-blue-500 hover:text-white dark:hover:bg-blue-500","\n              focus:outline-none focus:ring-0\n            "),title:"가비지 컬렉션 실행",style:{outline:"none",boxShadow:"none"},children:u?"실행 중...":"GC"}),(0,a.jsx)("button",{onClick:j,disabled:c,className:"\n              relative inline-flex items-center justify-center\n              w-10 h-6 rounded-full transition-all duration-300 cursor-pointer\n              ".concat(c?"bg-green-500 opacity-60 cursor-not-allowed":"bg-gray-300 dark:bg-gray-600 hover:bg-green-500 dark:hover:bg-green-500","\n              focus:outline-none focus:ring-0\n            "),title:"메모리 최적화",style:{outline:"none",boxShadow:"none"},children:(0,a.jsx)(J.A,{className:"w-3 h-3 text-white"})})]})]}),d&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(K.A,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-red-700",children:d})]}),n?(0,a.jsxs)("div",{className:"space-y-4",children:[n.application&&(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(J.A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,a.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-200",children:"애플리케이션 총 메모리 사용량"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:[N(n.application.used)," / ",N(n.application.total)]}),(0,a.jsxs)("span",{className:"text-lg font-bold ".concat(f(n.application.percentage)),children:[n.application.percentage.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-3 mt-2",children:(0,a.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 ".concat(v(n.application.percentage)),style:{width:"".concat(Math.min(n.application.percentage,100),"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(w,{title:"메인 프로세스",icon:(0,a.jsx)(Q.A,{className:"w-4 h-4 text-blue-500"}),info:n.main}),(0,a.jsx)(w,{title:"렌더러 프로세스",icon:(0,a.jsx)(q.A,{className:"w-4 h-4 text-green-500"}),info:n.renderer}),n.gpu&&(0,a.jsx)(w,{title:"GPU 메모리",icon:(0,a.jsx)(J.A,{className:"w-4 h-4 text-purple-500"}),info:n.gpu}),(0,a.jsx)(w,{title:"시스템 메모리",icon:(0,a.jsx)(G.A,{className:"w-4 h-4 text-orange-500"}),info:n.system})]}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-100 dark:border-gray-700",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"메모리 사용량 상세"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"메인 프로세스"}),(0,a.jsxs)("span",{className:"font-medium dark:text-gray-200",children:[N(n.main.used)," / ",N(n.main.total)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"렌더러 프로세스"}),(0,a.jsxs)("span",{className:"font-medium dark:text-gray-200",children:[N(n.renderer.used)," / ",N(n.renderer.total)]})]}),n.application&&(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-blue-700 dark:text-blue-300 border-t border-gray-200 dark:border-gray-600 pt-2",children:[(0,a.jsx)("span",{children:"애플리케이션 합계"}),(0,a.jsxs)("span",{children:[N(n.application.used)," / ",N(n.application.total)]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"시스템 총 메모리"}),(0,a.jsx)("span",{className:"font-medium dark:text-gray-200",children:N(n.system.total)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"시스템 사용 중"}),(0,a.jsx)("span",{className:"font-medium dark:text-gray-200",children:N(n.system.used)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"시스템 여유"}),(0,a.jsx)("span",{className:"font-medium text-green-600 dark:text-green-400",children:N(n.system.free)})]}),n.gpu&&(0,a.jsxs)("div",{className:"flex justify-between border-t border-gray-200 dark:border-gray-600 pt-2",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"GPU 메모리"}),(0,a.jsxs)("span",{className:"font-medium dark:text-gray-200",children:[N(n.gpu.used)," / ",N(n.gpu.total)]})]})]})]})]}),n.application&&n.application.percentage>85||n.system.percentage>90?(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(K.A,{className:"w-4 h-4 text-red-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-red-800",children:"높은 메모리 사용량 경고"})]}),(0,a.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:[n.application&&n.application.percentage>85&&"애플리케이션 메모리 사용량이 높습니다. ",n.system.percentage>90&&"시스템 메모리 사용량이 높습니다. ","성능 저하를 방지하기 위해 메모리 최적화를 실행하거나 불필요한 프로그램을 종료하는 것을 권장합니다."]})]}):n.application&&n.application.percentage>70||n.system.percentage>80?(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(K.A,{className:"w-4 h-4 text-yellow-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-yellow-800",children:"메모리 사용량 주의"})]}),(0,a.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"메모리 사용량이 증가하고 있습니다. 메모리 정리를 실행하여 성능을 개선할 수 있습니다."})]}):null]}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(q.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),(0,a.jsx)("p",{children:"메모리 정보를 불러오는 중..."})]})]})};var Y=t(14738);let Z=e=>{let{className:s="",autoRefresh:t=!0,refreshInterval:l=3e3}=e,[n,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[d,x]=(0,r.useState)([]),[m,g]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[b,y]=(0,r.useState)(null),p=(0,r.useCallback)(async()=>{try{if(g(!0),h(null),window.electronAPI){let e=await window.electronAPI.system.getInfo();if(e.success&&e.data)i(e.data);else throw Error(e.error||"시스템 정보를 가져올 수 없습니다");let s=await window.electronAPI.memory.getInfo();s.success&&s.data&&o(s.data.system);let t=await window.electronAPI.system.getLoopProcesses();t.success&&t.data&&x(t.data)}}catch(e){console.error("시스템 정보 가져오기 실패:",e),h(e instanceof Error?e.message:"알 수 없는 오류")}finally{g(!1)}},[]);(0,r.useEffect)(()=>{if(p(),t){let e=setInterval(p,l);return()=>clearInterval(e)}},[p,t,l]);let j=e=>e>=1024?"".concat((e/1024).toFixed(1)," GB"):"".concat(e.toFixed(1)," MB"),f=e=>e>=80?"text-red-500":e>=60?"text-yellow-500":"text-green-500",v=e=>e>=80?"bg-red-500":e>=60?"bg-yellow-500":"bg-green-500",N=e=>e.toLowerCase().includes("main")?(0,a.jsx)(Q.A,{className:"w-3 h-3"}):e.toLowerCase().includes("renderer")?(0,a.jsx)(Y.A,{className:"w-3 h-3"}):e.toLowerCase().includes("gpu")?(0,a.jsx)(J.A,{className:"w-3 h-3"}):(0,a.jsx)(w.A,{className:"w-3 h-3"}),k=e=>e.toLowerCase().includes("main")?"text-blue-500":e.toLowerCase().includes("renderer")?"text-green-500":e.toLowerCase().includes("gpu")?"text-purple-500":"text-gray-500";return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 ".concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"활성 상태 모니터"}),m&&(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("button",{onClick:p,disabled:m,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"새로고침",children:(0,a.jsx)(W.A,{className:"w-4 h-4 ".concat(m?"animate-spin":"")})})})]}),u&&(0,a.jsxs)("div",{className:"m-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(K.A,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-red-700",children:u})]}),n?(0,a.jsxs)("div",{className:"p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(Q.A,{className:"w-4 h-4 text-blue-500"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"CPU"}),(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat(f(n.cpu.usage)),children:[n.cpu.usage.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(v(n.cpu.usage)),style:{width:"".concat(Math.min(n.cpu.usage,100),"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[n.cpu.cores,"코어 • ",n.cpu.model]})]}),c&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(q.A,{className:"w-4 h-4 text-green-500"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"메모리"}),(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat(f(c.percentage)),children:[c.percentage.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(v(c.percentage)),style:{width:"".concat(Math.min(c.percentage,100),"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[j(c.used)," / ",j(c.total)," 사용됨"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Loop 프로세스"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-3 text-xs font-medium text-gray-500 border-b border-gray-200",children:[(0,a.jsx)("div",{children:"프로세스"}),(0,a.jsx)("div",{className:"text-right",children:"PID"}),(0,a.jsx)("div",{className:"text-right",children:"CPU"}),(0,a.jsx)("div",{className:"text-right",children:"메모리"})]}),(0,a.jsx)("div",{className:"max-h-60 overflow-y-auto",children:d.length>0?d.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-3 text-sm hover:bg-white cursor-pointer transition-colors ".concat((null==b?void 0:b.pid)===e.pid?"bg-blue-50 border-l-2 border-blue-500":""),onClick:()=>y(e),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:k(e.name),children:N(e.name)}),(0,a.jsx)("span",{className:"truncate",children:e.name})]}),(0,a.jsx)("div",{className:"text-right text-gray-500",children:e.pid}),(0,a.jsxs)("div",{className:"text-right ".concat(f(e.cpuUsage)),children:[e.cpuUsage.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-right font-medium",children:j(e.memoryUsage)})]},e.pid)):(0,a.jsx)("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Loop 프로세스를 찾을 수 없습니다"})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"시스템 정보"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"업타임"}),(0,a.jsx)("div",{className:"font-medium",children:(e=>{let s=Math.floor(e/60),t=Math.floor(s/60),a=Math.floor(t/24);return a>0?"".concat(a,"일 ").concat(t%24,"시간"):t>0?"".concat(t,"시간 ").concat(s%60,"분"):"".concat(s,"분 ").concat(e%60,"초")})(n.uptime)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"플랫폼"}),(0,a.jsx)("div",{className:"font-medium",children:n.platform})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"아키텍처"}),(0,a.jsx)("div",{className:"font-medium",children:n.arch})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"호스트명"}),(0,a.jsx)("div",{className:"font-medium",children:n.hostname})]}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"총 메모리"}),(0,a.jsx)("div",{className:"font-medium",children:j(c.total)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"여유 메모리"}),(0,a.jsx)("div",{className:"font-medium text-green-600",children:j(c.free)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"로드 평균"}),(0,a.jsx)("div",{className:"font-medium",children:n.loadAverage.map(e=>e.toFixed(2)).join(", ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"CPU 속도"}),(0,a.jsxs)("div",{className:"font-medium",children:[n.cpu.speed," MHz"]})]})]})]}),b&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-3",children:"프로세스 상세 정보"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600",children:"이름"}),(0,a.jsx)("div",{className:"font-medium",children:b.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600",children:"PID"}),(0,a.jsx)("div",{className:"font-medium",children:b.pid})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600",children:"CPU 사용률"}),(0,a.jsxs)("div",{className:"font-medium",children:[b.cpuUsage.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600",children:"메모리 사용량"}),(0,a.jsx)("div",{className:"font-medium",children:j(b.memoryUsage)})]}),b.ppid&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600",children:"부모 PID"}),(0,a.jsx)("div",{className:"font-medium",children:b.ppid})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600",children:"상태"}),(0,a.jsx)("div",{className:"font-medium",children:b.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600",children:"메모리 비율"}),(0,a.jsxs)("div",{className:"font-medium",children:[b.memoryPercent.toFixed(1),"%"]})]}),b.user&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600",children:"사용자"}),(0,a.jsx)("div",{className:"font-medium",children:b.user})]})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(w.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{children:"시스템 정보를 불러오는 중..."})]})]})},$=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(t),children:s})},ee=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(t),children:s})},es=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 ".concat(t),children:s})},et=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 ".concat(t),children:s})},ea={default:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground",success:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-green-500 text-white hover:bg-green-600",warning:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-yellow-500 text-white hover:bg-yellow-600",error:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-red-500 text-white hover:bg-red-600"};function er(e){let{className:s,variant:t="default",...r}=e;return(0,a.jsx)("div",{className:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")}(ea[t],s),...r})}var el=t(40646),en=t(54861),ei=t(85339),ec=t(49509);function eo(){var e,s,t,l,n,i,c,o,d,x,m,g,u,h,b,y,p,j,f,v,N,k;let[A,C]=(0,r.useState)(null),[S,P]=(0,r.useState)(!0),[M,I]=(0,r.useState)(null),E=()=>{C({uiohook:{available:!1,version:"브라우저 환경",initialized:!1,loadError:"브라우저 환경에서는 네이티브 모듈을 사용할 수 없습니다",fallbackMode:!0,features:{keyboardHook:!1,mouseHook:!1,globalEvents:!1}},system:{platform:navigator.platform,arch:"브라우저",node:"브라우저 환경",electron:"브라우저 환경",chrome:navigator.userAgent,hostname:"localhost",uptime:0,cpuCount:navigator.hardwareConcurrency||1,cpuModel:"알 수 없음",loadAverage:{"1min":0,"5min":0,"15min":0},memory:{total:0,free:0,used:0,percentage:0}},permissions:{accessibility:!1,input:!1,screenRecording:null,microphone:null,camera:null},performance:{processUptime:0,memoryUsage:{rss:0,heapTotal:0,heapUsed:0,external:0,arrayBuffers:0},resourceUsage:null,pid:0,ppid:null},environment:{nodeEnv:"browser",isDev:!1,userAgent:navigator.userAgent,workingDirectory:"브라우저 환경"}})};(0,r.useEffect)(()=>{let e=async()=>{try{P(!0),I(null),console.log("\uD83D\uDD27 Native Module Status: 상태 조회 시작");let e=window.electronAPI,s=0;for(;!e&&s<30;)console.log("⏳ Electron API 로드 대기 중... (".concat(s+1,"/").concat(30,")")),await new Promise(e=>setTimeout(e,100)),e=window.electronAPI,s++;if(!e){console.warn("❌ Electron API를 찾을 수 없음"),E();return}console.log("✅ Electron API 발견됨:",Object.keys(e));let t=async function(e,s){for(var t=arguments.length,a=Array(t>2?t-2:0),r=2;r<t;r++)a[r-2]=arguments[r];try{if(e&&"object"==typeof e&&null!==e&&s in e){let t=e[s];if("function"==typeof t){let e=await t(...a);return(null==e?void 0:e.success)?e.data:e}}return null}catch(e){return console.error("❌ ".concat(s," 호출 실패:"),e),null}},a=async()=>{try{var s,t,a,r,l;let n=(null==(t=e.debug)||null==(s=t.getProcessInfo)?void 0:s.call(t))||{};return{platform:String(n.platform||navigator.platform),arch:String(n.arch||"알 수 없음"),node:String((null==(a=n.versions)?void 0:a.node)||"알 수 없음"),electron:String((null==(r=n.versions)?void 0:r.electron)||"알 수 없음"),chrome:String((null==(l=n.versions)?void 0:l.chrome)||navigator.userAgent),hostname:"localhost",uptime:0,cpuCount:navigator.hardwareConcurrency||1,cpuModel:"알 수 없음",loadAverage:{"1min":0,"5min":0,"15min":0},memory:{total:0,free:0,used:0,percentage:0}}}catch(e){return console.error("시스템 정보 수집 실패:",e),{platform:navigator.platform,arch:"알 수 없음",node:"알 수 없음",electron:"알 수 없음",chrome:navigator.userAgent,hostname:"localhost",uptime:0,cpuCount:navigator.hardwareConcurrency||1,cpuModel:"알 수 없음",loadAverage:{"1min":0,"5min":0,"15min":0},memory:{total:0,free:0,used:0,percentage:0}}}},r=async()=>{try{var s,a,r;let l=await t(e.memory,"getInfo"),n=(null==(a=e.debug)||null==(s=a.getProcessInfo)?void 0:s.call(a))||{},i=(null==l||null==(r=l.process)?void 0:r.memoryUsage)||{},c=Number(n.pid||(null==ec?void 0:ec.pid)||Date.now()%1e5);return{processUptime:Math.floor(Date.now()/1e3)%3600,memoryUsage:{rss:Number(i.rss)||1024*Math.floor(200*Math.random()+50)*1024,heapTotal:Number(i.heapTotal)||1024*Math.floor(100*Math.random()+30)*1024,heapUsed:Number(i.heapUsed)||1024*Math.floor(80*Math.random()+20)*1024,external:Number(i.external)||1024*Math.floor(10*Math.random()+5)*1024,arrayBuffers:Number(i.arrayBuffers)||1024*Math.floor(5*Math.random()+1)*1024},resourceUsage:null,pid:c,ppid:null}}catch(e){return console.error("성능 정보 수집 실패:",e),{processUptime:Math.floor(Date.now()/1e3)%3600,memoryUsage:{rss:0x8000000,heapTotal:0x4000000,heapUsed:0x2d00000,external:8388608,arrayBuffers:2097152},resourceUsage:null,pid:Date.now()%1e5,ppid:null}}},l=async()=>{try{var s,t;let a=(null==(t=e.debug)||null==(s=t.getProcessInfo)?void 0:s.call(t))||{};return{nodeEnv:String(a.env||"unknown"),isDev:"development"===a.env,userAgent:navigator.userAgent,workingDirectory:"알 수 없음"}}catch(e){return console.error("환경 정보 수집 실패:",e),{nodeEnv:"unknown",isDev:!1,userAgent:navigator.userAgent,workingDirectory:"알 수 없음"}}},n=async()=>{try{let s=e.native;if(!s)return{available:!1,version:"사용 불가",initialized:!1,loadError:"Native API를 찾을 수 없음",fallbackMode:!0,features:{keyboardHook:!1,mouseHook:!1,globalEvents:!1}};let a=await t(s,"isNativeModuleAvailable")||!1,r=await t(s,"getNativeModuleVersion")||"알 수 없음";return{available:!!a,version:String(r),initialized:!!a,loadError:a?null:"네이티브 모듈 로드 실패",fallbackMode:!a,features:{keyboardHook:!!a,mouseHook:!1,globalEvents:!!a}}}catch(e){return console.error("네이티브 모듈 정보 수집 실패:",e),{available:!1,version:"오류",initialized:!1,loadError:String(e),fallbackMode:!0,features:{keyboardHook:!1,mouseHook:!1,globalEvents:!1}}}},i=async()=>({accessibility:!0,input:!0,screenRecording:null,microphone:null,camera:null}),[c,o,d,x,m]=await Promise.all([a(),r(),l(),n(),i()]),g={uiohook:x,system:c,performance:o,environment:d,permissions:m};console.log("✅ 상태 정보 수집 완료:",g),C(g)}catch(e){console.error("❌ 상태 조회 실패:",e),I(e instanceof Error?e.message:"알 수 없는 오류")}finally{P(!1)}};e();let s=setInterval(e,1e4);return()=>clearInterval(s)},[]);let T=(e,s)=>(0,a.jsx)(er,{variant:e?"default":"destructive",children:e?s:"".concat(s," 비활성")});return S?(0,a.jsxs)($,{children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5 animate-spin"}),"네이티브 모듈 상태"]})}),(0,a.jsx)(es,{children:(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"상태 확인 중..."})})})]}):M?(0,a.jsxs)($,{children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{className:"flex items-center gap-2",children:[(0,a.jsx)(ei.A,{className:"h-5 w-5 text-red-500"}),"네이티브 모듈 상태"]})}),(0,a.jsx)(es,{children:(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("div",{className:"text-sm text-red-600",children:M})})})]}):A?(0,a.jsxs)($,{children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{className:"flex items-center gap-2",children:[(0,a.jsx)(Q.A,{className:"h-5 w-5"}),"네이티브 모듈 상태"]})}),(0,a.jsxs)(es,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"uiohook (키보드 후킹)"}),(null==A||null==(e=A.uiohook)?void 0:e.available)?(0,a.jsx)(el.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(en.A,{className:"h-4 w-4 text-red-500"})]}),(0,a.jsxs)("div",{className:"pl-4 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"버전:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==A||null==(s=A.uiohook)?void 0:s.version)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"초기화:"}),T((null==A||null==(t=A.uiohook)?void 0:t.initialized)||!1,"완료")]}),(null==A||null==(l=A.uiohook)?void 0:l.fallbackMode)&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"폴백 모드:"}),(0,a.jsx)(er,{variant:"secondary",children:"활성"})]}),(null==A||null==(n=A.uiohook)?void 0:n.loadError)&&(0,a.jsxs)("div",{className:"text-xs text-red-500 mt-1",children:["오류: ",A.uiohook.loadError]}),(null==A||null==(i=A.uiohook)?void 0:i.features)&&(0,a.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,a.jsx)("div",{className:"text-xs font-medium",children:"기능:"}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"키보드 후킹:"}),T((null==(c=A.uiohook.features)?void 0:c.keyboardHook)||!1,"지원")]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"마우스 후킹:"}),T((null==(o=A.uiohook.features)?void 0:o.mouseHook)||!1,"지원")]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"글로벌 이벤트:"}),T((null==(d=A.uiohook.features)?void 0:d.globalEvents)||!1,"지원")]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"시스템 정보"})]}),(0,a.jsxs)("div",{className:"pl-4 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"플랫폼:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==A||null==(x=A.system)?void 0:x.platform)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"아키텍처:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==A||null==(m=A.system)?void 0:m.arch)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"Node.js:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==A||null==(g=A.system)?void 0:g.node)||"N/A"})]}),(null==A||null==(u=A.system)?void 0:u.electron)&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"Electron:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:A.system.electron})]}),(null==A||null==(h=A.system)?void 0:h.cpuCount)&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"CPU 코어:"}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[A.system.cpuCount,"개"]})]}),(null==A||null==(b=A.system)?void 0:b.memory)&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"시스템 메모리:"}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[Math.round(A.system.memory.percentage),"% 사용 중"]})]}),(null==A||null==(y=A.system)?void 0:y.uptime)&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"가동 시간:"}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[Math.floor(A.system.uptime/3600),"시간"]})]})]})]}),(null==A?void 0:A.performance)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"성능 정보"})]}),(0,a.jsxs)("div",{className:"pl-4 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"프로세스 ID:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:A.performance.pid})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"힙 메모리:"}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[Math.round(A.performance.memoryUsage.heapUsed/1024/1024),"MB"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"RSS 메모리:"}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[Math.round(A.performance.memoryUsage.rss/1024/1024),"MB"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"프로세스 실행 시간:"}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[Math.floor(A.performance.processUptime/60),"분"]})]})]})]}),(null==A?void 0:A.environment)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"환경 정보"})]}),(0,a.jsxs)("div",{className:"pl-4 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"환경:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:A.environment.nodeEnv})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"개발 모드:"}),T(A.environment.isDev,"활성")]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"작업 디렉토리:"}),(0,a.jsx)("span",{className:"text-muted-foreground text-xs truncate max-w-32",children:A.environment.workingDirectory})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ei.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"권한 상태"})]}),(0,a.jsxs)("div",{className:"pl-4 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"접근성 권한:"}),T((null==A||null==(p=A.permissions)?void 0:p.accessibility)||!1,"허용됨")]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"입력 모니터링:"}),T((null==A||null==(j=A.permissions)?void 0:j.input)||!1,"허용됨")]})]})]}),(null==A||null==(v=A.system)||null==(f=v.platform)?void 0:f.toLowerCase().includes("mac"))&&(!(null==A||null==(N=A.permissions)?void 0:N.accessibility)||!(null==A||null==(k=A.permissions)?void 0:k.input))&&(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsx)("button",{className:"w-full text-xs px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",onClick:()=>{alert("시스템 환경설정 > 보안 및 개인 정보 보호 > 개인 정보 보호에서 Loop에 접근성 및 입력 모니터링 권한을 허용해주세요.")},children:"권한 설정 안내"})})]})]}):(0,a.jsxs)($,{children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{className:"flex items-center gap-2",children:[(0,a.jsx)(en.A,{className:"h-5 w-5 text-gray-500"}),"네이티브 모듈 상태"]})}),(0,a.jsx)(es,{children:(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"네이티브 모듈 정보를 가져올 수 없습니다"})})})]})}let ed=()=>{let e=window.electronAPI;return e||null},ex=[{id:"general",label:"일반 설정",icon:P.A},{id:"typing",label:"타이핑 분석",icon:i.A},{id:"performance",label:"성능 설정",icon:w.A},{id:"data",label:"데이터 및 개인정보",icon:M.A}];function em(e){let{onSave:s}=e;console.log("설정 컴포넌트 초기화 - 프롭스 확인:",{hasOnSave:!!s,timestamp:new Date().toISOString()});let{settings:t,isLoading:l,error:n,saveSettings:c,resetSettings:o}=(0,F.t)();n&&console.error("설정 에러 발생:",{error:n,timestamp:new Date().toISOString()});let{theme:x,isDarkMode:m,toggleDarkMode:g}=(0,H.D)(),u=()=>{console.log("테마 토글 요청:",{currentTheme:x,timestamp:new Date().toISOString()})},h=e=>{console.log("테마 설정 요청:",{newTheme:e,currentTheme:x,timestamp:new Date().toISOString()})},[b,y]=(0,r.useState)(!1),p=(e,s)=>{console.log("재시작 필요 상태 변경:",{needed:e,reason:s,timestamp:new Date().toISOString()}),y(e)},[j,f]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[k,A]=(0,r.useState)("settings"),[C,S]=(0,r.useState)(""),[K,W]=(0,r.useState)("general"),[_,q]=(0,r.useState)(!1),[J,Q]=(0,r.useState)(!1),[Y,$]=(0,r.useState)(null),[ee,es]=(0,r.useState)("right"),et=async(e,s)=>{console.log("⚙️ Settings: ".concat(e," 설정 변경:"),s),"enableGPUAcceleration"!==e&&"gpuAccelerationLevel"!==e&&q(!1);try{await c({[e]:s}),console.log("✅ Settings: ".concat(e," 설정 저장 및 상태 동기화 완료"))}catch(s){console.error("❌ Settings: ".concat(e," 설정 저장 실패:"),s)}},ea=e=>{if(e===K||J)return;if(u(),h(e),!t.enableAnimations)return void W(e);let s=ex.findIndex(e=>e.id===K),a=ex.findIndex(s=>s.id===e);Q(!0),$(e),es(a>s?"right":"left"),setTimeout(()=>{W(e),$(null),Q(!1)},300)},er=async()=>{let e=!t.enableGPUAcceleration,s=e?"활성화":"비활성화";if(window.confirm("GPU 가속을 ".concat(s,"하시겠습니까?\n\n")+"이 설정을 변경하면 애플리케이션이 재시작됩니다.\n계속하시겠습니까?")){q(!0),await et("enableGPUAcceleration",e);try{let t=ed();if(t){let a=await t.invoke("setGPUAcceleration",e);a.success&&(console.log("GPU 가속: ".concat(e?"활성화":"비활성화")),a.requiresRestart&&(S("GPU 가속 ".concat(s)),N(!0),p(!0,"GPU 가속 설정 변경")))}}catch(s){console.error("GPU 가속 설정 실패:",s),await et("enableGPUAcceleration",!e),q(!1)}}},el=async e=>{let s=t.processingMode;if(s===e)return;let a="gpu-intensive"===e||"cpu-intensive"===e;if(a){let s="gpu-intensive"===e?"GPU 집약적 모드":"CPU 집약적 모드";if(!window.confirm('처리 모드를 "'.concat(s,'"로 변경하시겠습니까?\n\n')+"이 설정을 변경하면 애플리케이션이 재시작됩니다.\n계속하시겠습니까?"))return}if(await et("processingMode",e),a){let s="gpu-intensive"===e?"GPU 집약적 모드":"CPU 집약적 모드";S("처리 모드 변경 (".concat(s,")")),N(!0),p(!0,"처리 모드 변경: ".concat(s))}try{ed()&&console.log("처리 모드 변경: ".concat(e))}catch(e){console.error("처리 모드 변경 실패:",e),await et("processingMode",s)}},en=async e=>{console.log("⚙️ Settings: 윈도우 모드 변경: ".concat(e)),await et("windowMode",e)},ei=async()=>{let e=!t.enableMemoryOptimization;if(await et("enableMemoryOptimization",e),e)try{var s;let e=ed();if(null==e||null==(s=e.memory)?void 0:s.optimize){let s=await e.memory.optimize();console.log("메모리 최적화 완료:",s),f(!0),setTimeout(()=>f(!1),2e3)}}catch(e){console.error("메모리 최적화 실패:",e)}},ec=async()=>{console.log("⚙️ Settings: 저장 시작");try{f(!1);let r=ed();if(r){console.log("\uD83D\uDD0C Settings: Electron IPC를 통한 저장 시도");try{var e,a;let l=await (null==(a=r.settings)||null==(e=a.updateMultiple)?void 0:e.call(a,t));if(console.log("\uD83D\uDCE1 Settings: 백엔드 응답:",l),l&&!1!==l.success)console.log("✅ Settings: 백엔드 저장 성공"),f(!0),setTimeout(()=>f(!1),3e3),null==s||s(t),_?(console.log("\uD83C\uDFAF Settings: GPU 가속화만 변경됨 - 새로고침 건너뜀"),q(!1)):(console.log("\uD83D\uDD04 Settings: GPU 가속화 외 설정 변경으로 인한 앱 새로고침"),setTimeout(()=>{var e;let s=ed();(null==s||null==(e=s.app)?void 0:e.restart)?s.app.restart():window.location.reload()},1e3));else throw Error("백엔드 저장 실패: "+((null==l?void 0:l.error)||"알 수 없는 오류"))}catch(e){throw console.error("❌ Settings: IPC 통신 오류:",e),Error("설정 저장 중 통신 오류가 발생했습니다.")}}else console.log("\uD83C\uDF10 Settings: 웹 환경에서 localStorage 저장"),localStorage.setItem("loop-settings",JSON.stringify(t)),f(!0),setTimeout(()=>f(!1),3e3),null==s||s(t),_?(console.log("\uD83C\uDFAF Settings: GPU 가속화만 변경됨 - 새로고침 건너뜀"),q(!1)):(console.log("\uD83D\uDD04 Settings: GPU 가속화 외 설정 변경으로 인한 페이지 새로고침"),setTimeout(()=>{window.location.reload()},1e3))}catch(s){console.error("❌ Settings: 저장 중 오류",s);let e=s instanceof Error?s.message:"설정 저장에 실패했습니다.";alert("저장 실패: ".concat(e,"\n\n다시 시도해주세요."))}},em=async()=>{try{await o(),y(!1)}catch(e){console.error("설정 초기화 실패:",e)}},eg=async()=>{console.log("⚙️ Settings: 다크모드 토글 버튼 클릭");let e=!t.darkMode;await et("darkMode",e),await et("theme",e?"dark":"light"),await g()},eu=e=>{let s=e||K;switch(console.log("Settings: Rendering category content for:",s),s){case"general":return console.log("Settings: Rendering general category"),(0,a.jsx)("div",{className:"space-y-6",style:{minHeight:"400px",visibility:"visible"},children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 shadow-sm border border-gray-200 dark:border-gray-700 p-6 settings-card",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,a.jsx)(P.A,{className:"h-5 w-5 mr-2"}),"일반 설정"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[m?(0,a.jsx)(I.A,{className:"h-4 w-4"}):(0,a.jsx)(E.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["다크 모드 (",x,")"]})]})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:eg,className:"toggle-switch ".concat(m?"active":""),role:"switch","aria-checked":m,"aria-label":"다크 모드 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"창 모드"}),(0,a.jsx)("div",{className:"space-y-2",children:[{value:"windowed",label:"창 모드",icon:T.A},{value:"fullscreen",label:"전체 화면",icon:U.A},{value:"fullscreenAutoHide",label:"전체 화면 (자동 숨김)",icon:D.A}].map(e=>(0,a.jsxs)("button",{onClick:()=>en(e.value),className:"w-full flex items-center space-x-3 px-4 py-3 border ".concat(t.enableAnimations?"transition-colors":""," settings-action-button ").concat(t.windowMode===e.value?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsx)("span",{children:"애니메이션 효과"})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enableAnimations",!t.enableAnimations),className:"toggle-switch ".concat(t.enableAnimations?"active":""),role:"switch","aria-checked":t.enableAnimations,"aria-label":"애니메이션 효과 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"알림 활성화"})]})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enableNotifications",!t.enableNotifications),className:"toggle-switch ".concat(t.enableNotifications?"active":""),role:"switch","aria-checked":t.enableNotifications,"aria-label":"알림 활성화 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]})]})]})});case"typing":return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"타이핑 분석"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[Object.entries(t.enabledCategories).map(e=>{let[s,r]=e;return(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsxs)("span",{children:["docs"===s&&"문서","office"===s&&"오피스","coding"===s&&"코딩","sns"===s&&"SNS","browser"===s&&"브라우저","game"===s&&"게임","media"===s&&"미디어","other"===s&&"기타"]})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enabledCategories",{...t.enabledCategories,[s]:!r}),className:"toggle-switch ".concat(r?"active":""),role:"switch","aria-checked":r,"aria-label":"".concat(s," 분석 토글"),children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]},s)}),(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsx)("span",{children:"실시간 통계"})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enableRealTimeStats",!t.enableRealTimeStats),className:"toggle-switch ".concat(t.enableRealTimeStats?"active":""),role:"switch","aria-checked":t.enableRealTimeStats,"aria-label":"실시간 통계 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]})]})]})});case"typing-advanced":return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"타이핑 분석 설정"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsx)("span",{children:"타이핑 분석 활성화"})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enableTypingAnalysis",!t.enableTypingAnalysis),className:"toggle-switch ".concat(t.enableTypingAnalysis?"active":""),role:"switch","aria-checked":t.enableTypingAnalysis,"aria-label":"타이핑 분석 활성화 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsx)("span",{children:"실시간 분석"})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enableRealTimeAnalysis",!t.enableRealTimeAnalysis),className:"toggle-switch ".concat(t.enableRealTimeAnalysis?"active":""),role:"switch","aria-checked":t.enableRealTimeAnalysis,"aria-label":"실시간 분석 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["통계 수집 주기: ",t.statsCollectionInterval,"초"]}),(0,a.jsx)("input",{type:"range",min:"1",max:"60",step:"1",value:t.statsCollectionInterval,onChange:e=>{console.debug("[설정] 통계 수집 간격 슬라이더 조정:",{newValue:parseInt(e.target.value),현재값:t.statsCollectionInterval})},onMouseUp:e=>et("statsCollectionInterval",parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsx)("span",{children:"키보드 레이아웃 자동 감지"})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enableKeyboardDetection",!t.enableKeyboardDetection),className:"toggle-switch ".concat(t.enableKeyboardDetection?"active":""),role:"switch","aria-checked":t.enableKeyboardDetection,"aria-label":"키보드 레이아웃 자동 감지 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsx)("span",{children:"타이핑 패턴 학습"})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enablePatternLearning",!t.enablePatternLearning),className:"toggle-switch ".concat(t.enablePatternLearning?"active":""),role:"switch","aria-checked":t.enablePatternLearning,"aria-label":"타이핑 패턴 학습 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]})]})]})});case"performance":{let e=[{id:"settings",label:"성능 설정",icon:w.A},{id:"memory",label:"메모리 모니터",icon:G.A},{id:"activity",label:"활성 상태",icon:R.A},{id:"system",label:"시스템 정보",icon:B.A}];return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:e.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>A(e.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium rounded-t-lg ".concat(t.enableAnimations?"transition-colors":""," ").concat(k===e.id?"bg-blue-50 dark:bg-blue-900/20 border-b-2 border-blue-500 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"),children:[(0,a.jsx)(s,{className:"h-4 w-4"}),e.label]},e.id)})}),(0,a.jsxs)("div",{className:"p-6",children:["settings"===k&&eh(),"memory"===k&&eb(),"activity"===k&&ey(),"system"===k&&ep()]})]})})}case"data":return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,a.jsx)(M.A,{className:"h-5 w-5 mr-2"}),"데이터 및 개인정보"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"데이터 수집 허용"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"앱 개선을 위한 익명 사용 데이터 수집"})]})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enableDataCollection",!t.enableDataCollection),className:"toggle-switch ".concat(t.enableDataCollection?"active":""),role:"switch","aria-checked":t.enableDataCollection,"aria-label":"데이터 수집 허용 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"자동 저장"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"설정 변경 시 자동으로 저장"})]})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:()=>et("enableAutoSave",!t.enableAutoSave),className:"toggle-switch ".concat(t.enableAutoSave?"active":""),role:"switch","aria-checked":t.enableAutoSave,"aria-label":"자동 저장 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["데이터 보관 기간: ",t.dataRetentionDays,"일"]}),(0,a.jsx)("input",{type:"range",min:"7",max:"365",step:"7",value:t.dataRetentionDays,onChange:e=>{et("dataRetentionDays",parseInt(e.target.value))},className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{children:"7일"}),(0,a.jsx)("span",{children:"1년"})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>{console.log("데이터 내보내기 요청")},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 ".concat(t.enableAnimations?"transition-colors":""),children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),"데이터 내보내기"]}),(0,a.jsxs)("button",{onClick:()=>{window.confirm("모든 저장된 데이터를 삭제하시겠습니까?\n\n이 작업은 되돌릴 수 없습니다.")&&console.log("데이터 삭제 요청")},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 ".concat(t.enableAnimations?"transition-colors":""),children:[(0,a.jsx)(M.A,{className:"h-4 w-4"}),"모든 데이터 삭제"]})]})})]})]})});default:return(0,a.jsx)("div",{children:"카테고리를 선택해주세요."})}},eh=()=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,a.jsx)(w.A,{className:"h-5 w-5 mr-2"}),"성능 설정"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"GPU 가속"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"변경 시 애플리케이션이 재시작됩니다"})]})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:er,className:"toggle-switch ".concat(t.enableGPUAcceleration?"active":""),role:"switch","aria-checked":t.enableGPUAcceleration,"aria-label":"GPU 가속 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"settings-row",children:[(0,a.jsx)("div",{className:"settings-label",children:(0,a.jsx)("span",{children:"메모리 최적화"})}),(0,a.jsx)("div",{className:"toggle-container",children:(0,a.jsx)("button",{onClick:ei,className:"toggle-switch ".concat(t.enableMemoryOptimization?"active":""),role:"switch","aria-checked":t.enableMemoryOptimization,"aria-label":"메모리 최적화 토글",children:(0,a.jsx)("div",{className:"toggle-thumb"})})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"처리 모드"}),(0,a.jsx)("div",{className:"space-y-2",children:[{value:"balanced",label:"균형 모드",description:"성능과 전력 소비의 균형"},{value:"performance",label:"성능 우선",description:"최대 성능 모드"},{value:"powerSaver",label:"절전 모드",description:"최소 전력 소비"},{value:"gpu-intensive",label:"GPU 집약적",description:"GPU 활용 최대화 (재시작 필요)"},{value:"cpu-intensive",label:"CPU 집약적",description:"CPU 활용 최대화 (재시작 필요)"}].map(e=>(0,a.jsxs)("button",{onClick:()=>el(e.value),className:"w-full flex flex-col items-start space-y-1 px-4 py-3 rounded-lg border ".concat(t.enableAnimations?"transition-colors":""," ").concat(t.processingMode===e.value?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,a.jsx)("span",{className:"font-medium",children:e.label}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["메모리 임계값: ",t.maxMemoryThreshold,"MB"]}),(0,a.jsx)("input",{type:"range",min:"50",max:"500",step:"10",value:t.maxMemoryThreshold,onChange:e=>{console.debug("[설정] 메모리 임계값 슬라이더 조정:",{값:e.target.value,현재값:t.maxMemoryThreshold})},onMouseUp:e=>et("maxMemoryThreshold",parseInt(e.target.value)),className:"w-full"})]})]})]}),eb=()=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,a.jsx)(G.A,{className:"h-5 w-5 mr-2"}),"메모리 모니터"]}),(0,a.jsx)(X,{})]}),ey=()=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,a.jsx)(R.A,{className:"h-5 w-5 mr-2"}),"활성 상태"]}),(0,a.jsx)(Z,{})]}),ep=()=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,a.jsx)(B.A,{className:"h-5 w-5 mr-2"}),"시스템 정보"]}),(0,a.jsx)(eo,{})]});return l?(console.log("Settings: Loading state"),(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})):(console.log("Settings: Rendering main component"),(0,a.jsxs)("div",{className:"flex h-full bg-gray-100 dark:bg-gray-950",children:[(0,a.jsxs)("div",{className:"w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col settings-navigation",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,a.jsx)(O.A,{className:"h-5 w-5 mr-2"}),"설정"]})}),(0,a.jsx)("nav",{className:"flex-1 p-4",children:(0,a.jsx)("ul",{className:"space-y-2",children:ex.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>ea(e.id),className:"w-full flex items-center gap-3 px-3 py-2 ".concat(t.enableAnimations?"transition-all duration-200":""," settings-action-button ").concat(K===e.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 active":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[(0,a.jsx)(e.icon,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.label})]})},e.id))})}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[(0,a.jsxs)("button",{onClick:ec,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 ".concat(t.enableAnimations?"transition-all duration-200 hover:translate-x-0.5":""," focus:outline-none focus:ring-0"),children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),"저장"]}),(0,a.jsxs)("button",{onClick:em,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 ".concat(t.enableAnimations?"transition-all duration-200 hover:translate-x-0.5":""," focus:outline-none focus:ring-0"),children:[(0,a.jsx)(z.A,{className:"h-4 w-4"}),"초기화"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 settings-content-container",children:[(0,a.jsx)("div",{className:"settings-content-page active ".concat(J&&t.enableAnimations?"right"===ee?"settings-slide-out-left":"settings-slide-out-right":""),style:{position:J?"absolute":"relative"},children:(0,a.jsx)("div",{className:"p-6 min-h-full",children:eu()})}),J&&Y&&(0,a.jsx)("div",{className:"settings-content-page ".concat(t.enableAnimations?"right"===ee?"settings-slide-in-right":"settings-slide-in-left":""),style:{position:"absolute"},children:(0,a.jsx)("div",{className:"p-6 min-h-full",children:Y&&eu(Y)})})]}),j&&(0,a.jsxs)("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50 flex items-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("span",{className:"font-medium",children:"설정이 성공적으로 저장되었습니다!"})]}),(0,a.jsx)(V,{isVisible:v,reason:C,onRestart:()=>{console.log("\uD83D\uDD04 애플리케이션 재시작 요청"),N(!1)},onClose:()=>{N(!1),y(!0)}})]}))}let eg=()=>{let e=document.getElementById("loop-init-styles");if(e||((e=document.createElement("style")).id="loop-init-styles",document.head.appendChild(e)),e.textContent='\n    /* Loop 앱 기본 CSS 변수 - ThemeProvider보다 낮은 우선순위 */\n    :root {\n      --background-color: #f9f9f9;\n      --text-color: #333;\n      --primary-color: #0070f3;\n      --text-secondary: #666;\n      --border-color: #e0e0e0;\n      --card-bg: #ffffff;\n      --header-bg: #ffffff;\n      --footer-bg: #f0f0f0;\n    }\n    \n    /* 다크모드 변수 정의 - ThemeProvider가 .dark 클래스를 추가하면 적용됨 */\n    .dark, .dark-mode, [data-theme="dark"] {\n      --background-color: #121212 !important;\n      --text-color: #e0e0e0 !important;\n      --text-secondary: #a0a0a0 !important;\n      --border-color: #333 !important;\n      --card-bg: #1e1e1e !important;\n      --header-bg: #1e1e1e !important;\n      --footer-bg: #121212 !important;\n    }\n    \n    /* body에 CSS 변수 적용 - transition 포함 */\n    body {\n      background-color: var(--background-color) !important;\n      color: var(--text-color) !important;\n      transition: background-color 0.3s ease, color 0.3s ease;\n    }\n    \n    /* 카드 및 주요 컴포넌트도 변수 사용 */\n    .bg-white, .bg-card {\n      background-color: var(--card-bg) !important;\n    }\n    \n    .text-gray-900, .text-black {\n      color: var(--text-color) !important;\n    }\n    \n    .text-gray-600, .text-gray-500 {\n      color: var(--text-secondary) !important;\n    }\n  ',!document.getElementById("loop-fonts")){let e=document.createElement("link");e.id="loop-fonts",e.rel="stylesheet",e.href="/assets/fonts/font.css",document.head.appendChild(e)}if(!document.getElementById("loop-electron-styles")){let e=document.createElement("link");e.id="loop-electron-styles",e.rel="stylesheet",e.href="/assets/styles/electron-styles.css",document.head.appendChild(e)}console.log("Loop CSS 변수 및 스타일 초기화 완료"),setTimeout(()=>{let e=getComputedStyle(document.body).backgroundColor,s=document.documentElement.classList.contains("dark")||document.documentElement.classList.contains("dark-mode");console.log("현재 body 배경색: ".concat(e,", 다크모드: ").concat(s))},1e3)};var eu=t(6874),eh=t.n(eu),eb=t(57340),ey=t(33109),ep=t(973),ej=t(81284),ef=t(54416),ev=t(5196),eN=t(62525);function ew(){let{notifications:e,unreadCount:s,markAsRead:t,markAllAsRead:l,removeNotification:n,clearAll:i}=(0,ep.E)(),[c,o]=(0,r.useState)(!1),[d,x]=(0,r.useState)("all"),m=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{function e(e){m.current&&!m.current.contains(e.target)&&g.current&&!g.current.contains(e.target)&&o(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{function e(e){if("Escape"===e.key&&c){var s;o(!1),null==(s=g.current)||s.focus()}}return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c]);let u=e=>{let s={className:"w-4 h-4"};switch(e){case"success":return(0,a.jsx)(el.A,{...s,className:"w-4 h-4 text-green-500"});case"warning":return(0,a.jsx)(ei.A,{...s,className:"w-4 h-4 text-yellow-500"});case"error":return(0,a.jsx)(ei.A,{...s,className:"w-4 h-4 text-red-500"});default:return(0,a.jsx)(ej.A,{...s,className:"w-4 h-4 text-blue-500"})}},h=e=>{let s=Math.floor((new Date().getTime()-e.getTime())/6e4);if(s<1)return"방금 전";if(s<60)return"".concat(s,"분 전");let t=Math.floor(s/60);if(t<24)return"".concat(t,"시간 전");let a=Math.floor(t/24);return"".concat(a,"일 전")},b=e.filter(e=>"unread"!==d||!e.read),y=e=>{e.read||t(e.id)};return(0,a.jsxs)("div",{className:"relative z-50",children:[(0,a.jsxs)("button",{ref:g,onClick:()=>o(!c),className:" relative p-2 bg-gray-100 dark:bg-gray-700  text-gray-600 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 dark:hover:text-red-400 focus:outline-none focus:ring-0 hover:outline-none transition-all duration-200 hover:shadow-sm border border-transparent hover:border-red-200 dark:hover:border-red-700 rounded-lg ",style:{minWidth:"40px",minHeight:"40px"},"aria-label":"알림 ".concat(s>0?"(".concat(s,"개의 읽지 않은 알림)"):""),"aria-expanded":c,"aria-haspopup":"true",children:[(0,a.jsx)(L.A,{className:"w-5 h-5"}),s>0&&(0,a.jsx)("span",{className:" absolute -top-1 -right-1 min-w-[20px] h-[20px]  bg-red-500 text-white  text-xs font-bold  rounded-full  flex items-center justify-center z-[200] border-2 border-white dark:border-gray-800 shadow-lg px-1 ",children:s>99?"99+":s})]}),c&&(0,a.jsxs)("div",{ref:m,className:" absolute right-0 mt-2  w-80 max-h-96  bg-white dark:bg-gray-800  border border-gray-200 dark:border-gray-700  rounded-lg shadow-xl z-[60] overflow-hidden ",style:{zIndex:9999,position:"fixed",right:"1rem",top:"4rem"},role:"menu","aria-labelledby":"notification-menu",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"알림"}),(0,a.jsx)("button",{onClick:()=>o(!1),className:" p-1 rounded-md  text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-0 hover:outline-none ","aria-label":"알림 패널 닫기",children:(0,a.jsx)(ef.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>x("all"),className:"\n                    px-3 py-1 text-sm rounded-md transition-colors\n                    ".concat("all"===d?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","\n                  "),children:["전체 (",e.length,")"]}),(0,a.jsxs)("button",{onClick:()=>x("unread"),className:"\n                    px-3 py-1 text-sm rounded-md transition-colors\n                    ".concat("unread"===d?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","\n                  "),children:["읽지 않음 (",s,")"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[s>0&&(0,a.jsx)("button",{onClick:l,className:" p-1 rounded-md  text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-0 hover:outline-none ",title:"모두 읽음 처리",children:(0,a.jsx)(ev.A,{className:"w-4 h-4"})}),e.length>0&&(0,a.jsx)("button",{onClick:i,className:" p-1 rounded-md  text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-0 hover:outline-none ",title:"모든 알림 삭제",children:(0,a.jsx)(eN.A,{className:"w-4 h-4"})})]})]})]}),(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto",children:0===b.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(L.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"unread"===d?"읽지 않은 알림이 없습니다":"알림이 없습니다"})]}):b.map(e=>(0,a.jsx)("div",{onClick:()=>y(e),className:"\n                    p-4 border-b border-gray-100 dark:border-gray-700 last:border-b-0\n                    hover:bg-gray-50 dark:hover:bg-gray-750 cursor-pointer\n                    transition-colors duration-150\n                    ".concat(e.read?"":"bg-blue-50 dark:bg-blue-900/20","\n                  "),role:"menuitem",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:u(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),!e.read&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 ml-2"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2 line-clamp-2",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-500 flex items-center",children:[(0,a.jsx)(k.A,{className:"w-3 h-3 mr-1"}),h(e.timestamp)]}),(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),n(e.id)},className:" p-1 rounded-md  text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-0 hover:outline-none ",title:"알림 삭제",children:(0,a.jsx)(ef.A,{className:"w-3 h-3"})})]})]})]})},e.id))}),e.length>0&&(0,a.jsx)("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("button",{onClick:()=>{o(!1)},className:" w-full px-3 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors flex items-center justify-center ",children:[(0,a.jsx)(O.A,{className:"w-4 h-4 mr-2"}),"알림 설정"]})})]})]})}function ek(e){let{activeTab:s,onTabChange:t}=e;console.log("헤더 렌더링:",{activeTab:s,timestamp:new Date().toISOString()});let r=[{id:"home",label:"홈",icon:(0,a.jsx)(eb.A,{className:"w-4 h-4"})},{id:"stats",label:"통계",icon:(0,a.jsx)(i.A,{className:"w-4 h-4"})},{id:"analysis",label:"분석",icon:(0,a.jsx)(ey.A,{className:"w-4 h-4"})},{id:"settings",label:"설정",icon:(0,a.jsx)(O.A,{className:"w-4 h-4"})}];return(0,a.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 relative overflow-visible",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 w-full overflow-visible",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(eh(),{href:"/",onClick:()=>t("home"),className:"flex items-center hover:opacity-80 transition-opacity duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg p-1","aria-label":"Loop 6 홈으로 이동",children:(0,a.jsx)("img",{src:"/appIcon.webp",alt:"Loop 6",className:"h-8 w-8 object-contain"})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("nav",{className:"flex items-center space-x-4",children:r.map(e=>(0,a.jsxs)("button",{onClick:()=>t(e.id),className:"\n                    flex items-center space-x-2 px-4 py-2 transition-all duration-200\n                    focus:outline-none focus:ring-0 hover:outline-none hover:shadow-sm\n                    ".concat(s===e.id?"bg-blue-600 dark:bg-blue-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white","\n                  "),children:[e.icon,(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.id))}),(0,a.jsx)("div",{className:"flex items-center pr-4 overflow-visible relative",style:{minHeight:"64px"},children:(0,a.jsx)("div",{className:"relative overflow-visible",style:{padding:"16px 8px"},children:(0,a.jsx)(ew,{})})})]})]})})})}t(66908);var eA=t(18979),eC=t(85690),eS=t(43453);function eP(){let[e,s]=(0,r.useState)({isActive:!1,hasPermissions:!1,isChecking:!0}),[t,l]=(0,r.useState)(null),n=(0,r.useCallback)(async()=>{try{s(e=>({...e,isChecking:!0,error:void 0}));let e=window.electronAPI;if(null==e?void 0:e.getKeyboardPermissions){let t=await e.getKeyboardPermissions(),a=(null==t?void 0:t.screenRecording)===!0&&(null==t?void 0:t.accessibility)===!0;s(e=>({...e,hasPermissions:a,isChecking:!1,error:a?void 0:"키보드 모니터링 권한이 필요합니다."}))}else s(e=>({...e,hasPermissions:!0,isChecking:!1}))}catch(e){console.error("[MonitoringButton] 권한 확인 오류:",e),s(e=>({...e,hasPermissions:!1,isChecking:!1,error:"권한 확인 중 오류가 발생했습니다."}))}},[]),i=(0,r.useCallback)(async()=>{try{var e;if(null==(e=window.electronAPI)?void 0:e.invoke){let e=await window.electronAPI.invoke("get-keyboard-status");(null==e?void 0:e.success)&&(null==e?void 0:e.status)&&(l(e.status),s(s=>({...s,isActive:e.status.listening||!1})))}}catch(e){console.error("[MonitoringButton] 키보드 상태 조회 오류:",e)}},[]),c=(0,r.useCallback)(async()=>{try{var e;if(s(e=>({...e,isChecking:!0,error:void 0})),null==(e=window.electronAPI)?void 0:e.invoke){let e=await window.electronAPI.invoke("start-monitoring");if(null==e?void 0:e.success)s(e=>({...e,isActive:!0,isChecking:!1})),await i(),console.log("[MonitoringButton] 모니터링 시작됨:",e.message||e),console.log("[MonitoringButton] 키보드 리스너 상태:",e.keyboardActive?"활성화됨":"비활성화됨");else throw Error((null==e?void 0:e.message)||"모니터링 시작 실패")}else throw Error("ElectronAPI를 사용할 수 없습니다.")}catch(e){console.error("[MonitoringButton] 모니터링 시작 오류:",e),s(s=>({...s,isActive:!1,isChecking:!1,error:e instanceof Error?e.message:"모니터링 시작 중 오류가 발생했습니다."}))}},[i]),o=(0,r.useCallback)(async()=>{try{var e;if(s(e=>({...e,isChecking:!0,error:void 0})),null==(e=window.electronAPI)?void 0:e.invoke){let e=await window.electronAPI.invoke("stop-monitoring");if(null==e?void 0:e.success)s(e=>({...e,isActive:!1,isChecking:!1})),await i(),console.log("[MonitoringButton] 모니터링 중지됨:",e.message||e),console.log("[MonitoringButton] 키보드 리스너 정리:",e.keyboardCleaned?"성공":"실패");else throw Error((null==e?void 0:e.message)||"모니터링 중지 실패")}else throw Error("ElectronAPI를 사용할 수 없습니다.")}catch(e){console.error("[MonitoringButton] 모니터링 중지 오류:",e),s(s=>({...s,isChecking:!1,error:e instanceof Error?e.message:"모니터링 중지 중 오류가 발생했습니다."}))}},[i]),d=(0,r.useCallback)(async()=>{if(e.isActive)await o();else{if(!e.hasPermissions)return void await n();await c()}},[e.isActive,e.hasPermissions,c,o,n]),x=(0,r.useCallback)(()=>{let e=window.electronAPI;(null==e?void 0:e.openPermissionsSettings)?e.openPermissionsSettings():console.warn("[MonitoringButton] 권한 설정 API를 사용할 수 없습니다.")},[]);(0,r.useEffect)(()=>{n(),i()},[n,i]),(0,r.useEffect)(()=>{if(e.isActive){let e=setInterval(i,5e3);return()=>clearInterval(e)}},[e.isActive,i]);let m=e.isChecking?{text:"확인 중...",icon:O.A,className:"bg-gray-500 hover:bg-gray-600 cursor-wait",disabled:!0}:e.hasPermissions?e.isActive?{text:"모니터링 중지",icon:eA.A,className:"bg-red-500 hover:bg-red-600",disabled:!1,onClick:d}:{text:"모니터링 활성화",icon:eC.A,className:"bg-blue-500 hover:bg-blue-600",disabled:!1,onClick:d}:{text:"권한 설정",icon:ei.A,className:"bg-orange-500 hover:bg-orange-600",disabled:!1,onClick:x},g=m.icon;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{onClick:m.onClick||d,disabled:m.disabled,className:"\n            inline-flex items-center gap-3 px-8 py-4 rounded-xl font-semibold text-white\n            transition-all duration-200 transform hover:scale-105 shadow-lg\n            disabled:transform-none disabled:cursor-not-allowed disabled:opacity-70\n            ".concat(m.className,"\n          "),children:[(0,a.jsx)(g,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-lg",children:m.text})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.hasPermissions?(0,a.jsx)(eS.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(ei.A,{className:"h-4 w-4 text-orange-500"}),(0,a.jsx)("span",{className:e.hasPermissions?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400",children:e.hasPermissions?"권한 승인됨":"권한 필요"})]}),t&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t.listening?"bg-green-500":"bg-gray-400")}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:t.listening?"리스닝 중":"대기 중"})]})]}),e.error&&(0,a.jsx)("div",{className:"text-center p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:e.error})}),e.isActive&&t&&(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"실시간 통계"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"총 타이핑:"}),(0,a.jsx)("span",{className:"ml-2 font-bold",children:t.totalTypingCount||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"큐 크기:"}),(0,a.jsx)("span",{className:"ml-2 font-bold",children:t.queueSize||0})]})]})]})]})}function eM(){let[e,s]=(0,r.useState)("home"),[t,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),o=()=>{console.log("페이지 UI 상태:",{activeTab:e,logsCount:t.length,isLoading:n,timestamp:new Date().toISOString()})};(0,r.useEffect)(()=>{d(),o(),eg()},[]);let d=async()=>{try{i(!0);let e=await fetch("/api/getLogs"),s=await e.json();s.success&&l(s.data.logs||[])}catch(e){console.error("로그 로드 오류:",e)}finally{i(!1)}},m=async e=>{try{let s=await fetch("/api/logs/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,totalChars:e.content.length})}),t=await s.json();t.success&&l(e=>[t.data,...e])}catch(e){console.error("로그 저장 오류:",e)}},g=[{id:"home",label:"홈"},{id:"stats",label:"통계"},{id:"analysis",label:"분석"},{id:"settings",label:"설정"}],u=()=>{console.log("내비게이션 아이템 구성:",{items:g.map(e=>({id:e.id,label:e.label})),currentTab:e,timestamp:new Date().toISOString()})};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-950",children:[(0,a.jsx)(ek,{activeTab:e,onTabChange:e=>{u(),s(e)}}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:n?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"로딩 중..."})]}):(()=>{switch(e){case"home":return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-900/20 dark:to-purple-900/20 rounded-2xl p-8 md:p-12",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10 dark:from-blue-400/5 dark:to-purple-400/5"}),(0,a.jsxs)("div",{className:"relative z-10 flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(eP,{})})]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,a.jsx)(x,{onComplete:m})}),t.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"최근 기록"}),(0,a.jsx)("button",{onClick:()=>s("stats"),className:"px-4 py-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg text-sm font-medium transition-colors",children:"전체 보기"})]}),(0,a.jsx)("div",{className:"space-y-3",children:t.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"group flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate mb-1",children:[e.content.substring(0,50),"..."]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),(0,a.jsxs)("span",{children:["타자: ",e.keyCount]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,a.jsxs)("span",{children:["시간: ",e.typingTime,"초"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),(0,a.jsxs)("span",{children:["타수: ",e.typingTime>0?Math.round(e.keyCount/e.typingTime*60):0,"타/분"]})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(e.timestamp).toLocaleDateString()}),(0,a.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]})]},e.id||s))})]}),0===t.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(c.A,{className:"h-10 w-10 text-gray-500 dark:text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"타이핑을 시작해보세요!"})]})]});case"stats":return(0,a.jsx)(A,{logs:t});case"analysis":return(0,a.jsx)(S,{});case"settings":return console.log("Setting tab activated"),(0,a.jsx)(em,{});default:return(0,a.jsx)("div",{children:"페이지를 찾을 수 없습니다."})}})()})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[435,583,441,684,358],()=>s(48796)),_N_E=e.O()}]);