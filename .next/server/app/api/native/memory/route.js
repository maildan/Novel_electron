(()=>{var e={};e.id=283,e.ids=[283],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},20033:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>x,routeModule:()=>m,serverHooks:()=>y,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>h});var r={};s.r(r),s.d(r,{GET:()=>l,POST:()=>p,dynamic:()=>c,revalidate:()=>u});var a=s(96559),o=s(48088),n=s(37719),i=s(32190);let c="force-static",u=!1;async function l(e){try{console.log("메모리 정보 요청 받음:",{url:e.url,method:e.method,userAgent:e.headers.get("user-agent")||"unknown",timestamp:new Date().toISOString()});let t=null;try{let e=await Promise.resolve().then(s.t.bind(s,31759,23));t=await e.getMemoryInfo()}catch(e){console.warn("네이티브 메모리 모듈을 로드할 수 없습니다:",e.message),t={totalJSHeapSize:0,usedJSHeapSize:0,jsHeapSizeLimit:0,system:{total:0,free:0,used:0}}}let r=t.jsHeapSizeLimit>0?t.usedJSHeapSize/t.jsHeapSizeLimit*100:0,a=t.system.total>0?t.system.used/t.system.total*100:0;return i.NextResponse.json({success:!0,data:{memory:t,usage:{js:Math.round(r),system:Math.round(a)},warnings:{highJsUsage:r>80,highSystemUsage:a>85}}})}catch(e){return console.error("메모리 정보 조회 중 오류:",e),i.NextResponse.json({success:!1,error:"메모리 정보 조회에 실패했습니다",details:void 0},{status:500})}}async function p(e){try{let{action:t,options:r}=await e.json();switch(t){case"optimize":try{let e=await Promise.resolve().then(s.t.bind(s,31759,23)),t=await e.optimizeMemory();return i.NextResponse.json({success:!0,data:t})}catch(t){console.warn("네이티브 메모리 최적화를 사용할 수 없어 폴백을 실행합니다:",t.message);let e=await d();return i.NextResponse.json({success:!0,data:e,fallback:!0})}case"cleanup":try{let e=await Promise.resolve().then(s.t.bind(s,31759,23)),t=await e.cleanupMemory();return i.NextResponse.json({success:!0,data:t})}catch(e){return global.gc&&global.gc(),i.NextResponse.json({success:!0,data:{cleaned:!0,method:"gc",timestamp:Date.now()},fallback:!0})}case"monitor":return i.NextResponse.json({success:!0,data:{monitoring:r?.enable??!0,interval:r?.interval??5e3}});default:return i.NextResponse.json({success:!1,error:"지원하지 않는 액션입니다"},{status:400})}}catch(e){return console.error("메모리 처리 중 오류:",e),i.NextResponse.json({success:!1,error:"메모리 처리에 실패했습니다",details:void 0},{status:500})}}async function d(){let e=Date.now();try{global.gc&&global.gc();let t=Date.now();return{optimized:!0,method:"browser",processingTime:t-e,actionsPerformed:["gc","cache_cleanup"]}}catch(e){return{optimized:!1,error:e.message,method:"browser"}}}let m=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/native/memory/route",pathname:"/api/native/memory",filename:"route",bundlePath:"app/api/native/memory/route"},resolvedPagePath:"/Users/user/loop/loop_6/src/app/api/native/memory/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:g,workUnitAsyncStorage:h,serverHooks:y}=m;function x(){return(0,n.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:h})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31759:e=>{"use strict";e.exports=require("../../../../native-modules")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,580],()=>s(20033));module.exports=r})();